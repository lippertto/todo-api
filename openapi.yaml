openapi: "3.1.0"
info:
  description: "This is the Code Intelligence Todo-API"
  version: "1.0.0"
  title: "Todo-API"
  contact:
    email: "tobias.lippert@fastmail.com"
host: "localhost"
basePath: "/v1"
tags:
  - name: "todo"
    description: "Everything about todos"
  - name: "tasks"
    description: "Access to the tasks of a todo"
schemes:
  - "https"
  - "http"
paths:
  /todos:
    post:
      tags:
        - "todo"
      summary: "Add a new todo"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          description: "Pet object that needs to be added to the store"
          required: true
          $ref: "#/definitions/Todo"
      responses:
        "201":
          description: "Successful creation"
          schema:
            $ref: "#/definitions/Todo"
        "400":
          description: "Invalid input"
          schema: {$ref: "#/definitions/Error"}
  /todos/{todoId}:
    get:
      tags:
        - "todo"
      summary: "Get an individual todo by id"
      consumes: ["application/json"]
      produces: ["application/json"]
      parameters:
        - name: "todoId"
          in: "path"
          description: "ID of todo to return"
          required: true
          schema:
            type: "integer"
            format: "int64"
      responses:
        "200":
          description: "A todo with the given id was found"
        "404":
          description: "No todo with the given id was found"
    put:
      tags:
        - "todo"
      summary: "Update an existing todo"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "todoId"
          in: "path"
          description: "ID of todo to return"
          required: true
          schema:
            type: "integer"
            format: "int64"
        - name: "body"
          in: "body"
          description: "The Todo to create"
          required: true
          $ref: "#/definitions/Todo"
      responses:
        "400":
          description: "Bad payload id provided"
        "404":
          description: "Todo not found"
  /todos/{todoId}/tasks:
    post:
      tags: ["tasks"]
      summary: "Create a new task"
      consumes: ["application/json"]
      produces: ["application/json"]
    parameters:
      - in: "body"
        $ref: "#/definitions/Task"
    responses:
      "201":
        description: "OK"
        $ref: "#/definitions/Task"
definitions:
  Error:
    type: "object"
    properties:
      "error":
        type: "object"
        properties:
          "code":
            type: "string"
          "message":
            type: "string"
          "details":
            type: ["string", "null"]
  Todo:
    type: "object"
    properties:
      id:
        type: "integer"
        format: "int64"
      name:
        type: "string"
      description:
        type: "string"
      tasks:
        type: "array"
        items:
          $ref: "#/definitions/Task"
        default:
          []
  Task:
    type: "object"
    properties:
      id:
        type: "integer"
        format: "int64"
      name:
        type: "string"